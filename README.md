
## Исследование модели OSI. 

Сетевая модель OSI (англ. open systems interconnection basic reference model) - концептуальная модель, которая обобщает и стандартизирует представление средств сетевого взаимодействия в телекоммуникационных и компьютерных системах, независимо от их внутреннего устройства и используемых технологий. 

Модель OSI была разработана в 1984 году Международной организацией стандартизации (ISO). Основной целью ее создания был поиск решения проблемы несовместимости устройств, использующих различные коммуникационные протоколы, путем перехода на единый, общий для всех систем стек протоколов.

##  Уровни модели OSI. 

### 1. Физический (Physical layer). 

На первой ступени модели OSI находится физический уровень. Он занимается непосредственно передачей информации. Здесь сигналы (радиосигналы, электрические, оптические) уходят от отправителя к получателю. На текущем уровне речь идёт о кабелях, радиоэфире, кодировании нулей и единиц и др. Сигнал первого уровня – это группа напряжений различной амплитуды, волн либо радиочастот. 

Физический уровень описывает способы передачи бит (а не пакетов данных) через физические среды линий связи, соединяющие сетевые устройства.

Один из основных стандартов среди технологий физического уровня – Ethernet, Bluetooth. 

Протокол данного уровня - USB определяет универсальный и упрощенный транспорт USB в среде UEFI. Этот протокол используется средствами флэш-памяти, режимом запоминающего устройства USB и другими средствами, которые требуют двунаправленного обмена данными между устройством, которое загружается в среду UEFI, и главным компьютером.

### 2. Канальный уровень (Data Link). 

После получения сигнала с предыдущего физического уровня, на следующем (канальном) уровне происходит проверка и исправление погрешностей передачи. Здесь появляются термины «фрейм» и «MAC-адрес». MAC адреса занимают 48 бит в шестнадцатиричном формате и могут записываться, например, таким образом: 00:26:57:00:1f:02.

Канальный уровень предназначен для передачи данных между двумя узлами, находящихся в одной локальной сети. Роль PDU исполняют фреймы (англ. frame). Фреймы канального уровня не пересекают границ локальной сети, что позволяет данному уровню сосредоточиться на локальной доставке (фактически межсетевой доставкой занимаются более высокие уровни).

Заголовок фрейма формируется из аппаратных адресов отправителя и получателя, что позволяет однозначно определить устройство, которое отправило данный фрейм и устройство, которому он предназначен. При этом никакая часть адреса не может быть использована, чтобы определить некую логическую/физическую группу к которой принадлежит устройство. 

Второй уровень более сложный, чем предыдущий, физический. В нём условно выделяют следующие подуровни управления: 1. LLC (логическим каналом), 2. MAC (доступом к среде). 

Устройствами второго, канального, уровня считаются мосты и коммутаторы.

Протоколы данного уровня: 

PPP (Point-To-Point Protocol, протокол прямого соединения между двумя узлами). 

SLIP (Serial Line Internet Protocol, предшественник PPP, который всё ещё используется в микроконтроллерах). 

### 3. Сетевой уровень (Network layer). 

Над канальным уровнем находится следующий – сетевой. На этой ступени вводятся понятия «маршрутизация» и «IP-адрес». Для трансформации MAC-адресов в IP применяется протокол ARP.

Здесь осуществляется маршрутизация трафика. Когда пользователь, к примеру, желает перейти на сайт и вводит его адрес, отправляется DNS-запрос. Ответом на него будет IP-адрес, который подставляется в пакет. Пакет данных – это новый термин, который появляется на 3-м сетевом уровне.

Устройствами здесь являются роутер или маршрутизатор. 

Протоколы данного уровня: 

IPX (Internetwork Packet Exchange, протокол межсетевого обмена). 

IP/IPv4/IPv6 (Internet Protocol) сетевой протокол стека TCP/IP. 

AppleTalk — стек протоколов, разработанных Apple Computer для компьютерной сети. Он был изначально включён в Macintosh (1984), но потом компания отказалась от него в пользу TCP/IP.

### 4. Транспортный уровень (Transport layer). 

Здесь происходит доставка информации по каналам внешней сети. Блоки данных здесь делятся на отдельные фрагменты, размеры которых будут зависеть от используемого протокола. Для транспортного уровня это TCP и UDP. 

UDP — один из ключевых элементов набора сетевых протоколов для Интернета. С UDP компьютерные приложения могут посылать сообщения другим хостам по IP-сети без необходимости предварительного сообщения для установки специальных каналов передачи или путей данных.

UDP (User Datagram Protocol) применяется, когда потеря нескольких пакетов не принципиальна. Например, при передаче видео, изображений, аудиоальбома. 

TCP (Transmission Control Protocol) – протокол, хорошо подходящий для передачи трафика, для которого любые потери пакетов чувствительны. Процесс передачи контролируется, благодаря чему потерянные пакеты будут обнаружены и запрошены повторно. 

Транспортный уровень использует сегменты (Data Segment — содержит данные, константы и рабочие области) или датаграммы (datagram — блок информации, передаваемый протоколом через сеть связи без предварительного установления соединения и создания виртуального канала) в качестве основного типа данных.

### 5. Сеансовый уровень (Session layer). 

Сеансовый уровень в ответе за организацию сеансов связи между приложениями на компьютерах. Он отвечает за создание и окончание сеанса, обмен данными, за синхронизацию и другие процессы. 

Сеансовый уровень отвечает за поддержание сеанса связи, позволяя приложениям взаимодействовать между собой длительное время. 

Именно на этом уровне работают Zoom и Skype.

К протоколам сеансового уровня относятся SMPP (через него отправляются СМС сообщения), PAP.

SMPP — одноранговая передача коротких сообщений. Является открытым протоколом в телекоммуникационной отрасли, который разработан специально, чтобы обеспечить гибкий интерфейс для обмена SMS-сообщениями между прикладными SMS-платформами, маршрутизаторами и центрами службы коротких сообщений. 

PAP (англ. Password Authentication Protocol) — протокол простой проверки подлинности, предусматривающий отправку имени пользователя и пароля на сервер удалённого доступа открытым текстом (без шифрования).

### 6. Уровень представления (Presentation layer). 

На шестой ступени осуществляется преобразование форматов данных, например, сжатие и кодирование.

Уровень представления занимается представлением данных, передаваемых прикладными процессами в нужной форме. Данные, полученные от приложений с прикладного уровня, на уровне представления преобразуются в формат подходящий для передачи их по сети, а полученные по сети данные преобразуются в формат приложений. Также кроме форматов и представления данных, данный уровень занимается конвертацией структур данных, используемых различными приложениями. Другой функцией, выполняемой на уровне представлений, является шифрование данных, которое применяется в тех случаях, когда необходимо защитить передаваемую информацию от доступа несанкционированными получателями.

Уровень представления выполняет следующие основные функции:

1. Генерация запросов на установление/завершение сеансов взаимодействия прикладных процессов. 
2. Согласование представления данных между прикладными процессами. 
3. Конвертация форм представления данных.
4. Шифрование данных. 

Здесь находиться всем известный RAP доживший уже до 7 уровня. 

Примеры протоколов данного уровня:

LPP (Lightweight Presentation Protocol) - это протокол, используемый для предоставления услуг представления ISO поверх стеков протоколов на основе TCP/IP. 

NCP (NetWare Core Protocol) - это сетевой протокол, который используется в некоторых продуктах от Novell, является надстройкой над протоколом IPX или TCP/IP и используется для организации обмена между рабочей станцией и файловым сервером.

AFP (Apple Filing Protocol) - сетевой протокол представительского и прикладного уровней сетевой модели OSI, предоставляющий доступ к файлам в Mac OS X.

ICA (Independent Computing Architecture) - закрытый протокол для сервера приложений, разработанного компанией Citrix Systems. Протокол определяет спецификацию обмена данными между сервером и клиентами, но не встроен ни в одну из платформ. По умолчанию используется порт TCP 1494.

### 7. Прикладной уровень (Application layer). 

Верхний уровень модели, где располагаются сетевые службы, с которыми напрямую взаимодействуют пользователи. Данный уровень описывает взаимосвязь приложений на ПК и внешней сети. Сюда относятся протоколы для просмотра страниц в интернете (HTTPS, HTTP), для работы с почтовыми службами (SMTP, POP3), для передачи файлов (FTP, TFTP) и другие.

Самый верхний уровень модели, предоставляет набор интерфейсов для взаимодействия пользовательских процессов с сетью. Единицу информации, которой оперируют три верхних уровня модели OSI, принято называть сообщение (англ.message).

Прикладной уровень выполняет следующие функции:

1. Позволяет приложениям использовать сетевые службы (например удалённый доступ к файлам).
2. Идентификация пользователей по их паролям, адресам, электронным подписям.
3. Предоставление приложениям информации об ошибках.
4. Определение достаточности имеющихся ресурсов.
5. Управление данными, которыми обмениваются прикладные процессы и синхронизация взаимодействия прикладных процессов. 

Примеры протоколов данного уровня:

HTTP (HyperText Transfer Protocol -  «протокол передачи гипертекста») - это протокол, позволяющий получать различные ресурсы, например HTML-документы. Протокол HTTP лежит в основе обмена данными в Интернете. HTTP является протоколом клиент-серверного взаимодействия, что означает инициирование запросов к серверу самим получателем, обычно веб-браузером (web-browser). 

Принцип работы протокола HTTP: программа-клиент осуществляет TCP-соединение с сервером (стандартный номер порта-80) и выводит ему HTTP-запрос. Сервер прорабатывает данный запрос и выдает HTTP-ответ клиенту. 

FTP (File Transfer Protocol) - протокол передачи файлов по сети, появившийся в 1971 году задолго до HTTP и даже до TCP/IP, благодаря чему является одним из старейших прикладных протоколов. Изначально FTP работал поверх протокола NCP, на сегодняшний день широко используется для распространения ПО и доступа к удалённым хостам. 

Принцип работы протокола FTP: При передаче файлов FTP использует одновременно два TCP-канала: один из них отвечает за управление передачей данных, а второй — передает их.
#### Когда осуществляется передача с верхнего на нижний, это именуется инкапсуляцией данных, а в обратном порядке – декапсуляцией.

## IP адресация. 

IP-адрес является уникальным 32-битным идентификатором IP-интерфейса в Интернет. 

## Структура IPv4 адресов и их классы (A, B, C, D, E).

### Структура IPv4 адресов.

В 4-й версии IP-адрес представляет собой 32-битное число. 
IP-адрес IPv4 имеет 32-битную (4 байта) структуру. Он разделён на 4 части, каждая из которых состоит из 8 бит (1 байт) и называется октетом. 

В предыдущих версиях, Каждый бит IP-адреса – цифра двоичной системы. 
Пример адреса (IPv4) в двоичном виде: 11000000.10101000.00110010.00000001.

При преобразовании октета с двоичной системы в десятеричную получается одно число со значением от 0 до 255. IP-адрес в десятичном виде: 192.168.50.1.

### Классы IPv4 адресов. 

_Класс А_. 

Все IP адреса в диапазоне от 1.0.0.0 до 127.255.255.255 для адресов класса А, (маска 255.0.0.0). То есть, это огромные сети (16 млн адресов в каждой), которые сразу взяли половину всего адресного пространства. 

Этому классу дан самый большой блок адресов, а если быть точным, то половина всего адресного пространства. Предназначался данный класс для крупных сетей. 

Первый бит в адресах такого формата всегда равен 0. За идентификацию сети отвечает начальный октет, позволяющий разместить 127 уникальных сетей. Оставшиеся 3 октета используются для обозначения узлов, максимальное количество которых составляет 17 млн. на каждую сеть. 

В чем суть. Первый октет, то есть 8 бит, остаются за адресом сети, а 3 последних октета (то есть оставшиеся 24 бита) назначаются хостам. Вот для того, чтобы показать, какой кусок относится к сети, а какой к хостам, используется маска. По структуре записи она аналогична записи IP-адреса. Отличие маски от IP-адресов в том, что 0 и 1 не могут чередоваться. Сначала идут 1, а потом 0. Таким образом, там где есть единица, значит это участок сети. Главное знать, что маска класса A — 255.0.0.0. 

Первый бит для класса A он равен 0. Этот бит как раз нужен для того, чтобы сетевое устройство понимало, к какому классу оно принадлежит. Он же еще задает начальный и конечный диапазон адресов. Если в двоичном виде записать на всех октетах единицы, кроме первого бита в первом октете (там всегда 0), то получится 127.255.255.255, что является границей класса A. Например, возьмем адрес 44.58.63.132. Мы знаем, что у класса A первый октет отдается под адрес сети. То есть «44» — это адрес сети, а «58.63.132» — это адрес хоста. 

_Класс B_. 

Первые биты IP-адреса равны 10. Начальные два октета относятся к идентификатору сети, а последние два – к идентификатору узла. Возможно создание 16384 сетей, каждая из которых поддерживает размещение 65000 узлов.

Все адреса в диапазоне от 128.0.0.0 до 191.255.255.255. У этих адресов стандартный префикс /16 (255.255.0.0). Это половина от оставшейся половины. Довольно большие сети по 65534 хоста в каждой. 

Этому классу был дан блок поменьше. И адреса из этого блока предназначались для сетей средних масштабов. 2 октета отданы под адрес сети, и 2 — под адрес хостов. Маска у B класса — 255.255.0.0. Первые биты строго 10. А остальные меняются. Перейдем к примеру: 172.16.105.32. Два первых октета под адрес сети — «172.16». А 3-ий и 4-ый под адрес хоста — «105.32».

_Класс С_. 

Все адреса с 192.0.0.0 по 223.255.255.255. Для этих адресов префикс /24 и маска 255.255.255.0 в таких сетях умещается всего по 254 хоста. 

Этот класс обделили адресами и дали ему самый маленький блок. Он был предназначен для мелких сетей. Зато этот класс отдавал целых 3 октета под адрес сети и только 1 октет — под хосты. Маска у него — 255.255.255.0. Первые биты 110. На примере это выглядит так — 192.168.1.5. Адрес сети «192.168.1», а адрес хоста «5». 

Итак, начальные биты IP-адреса равны 110. За идентификацию сети отвечают первые три октета, позволяющие создать 2 млн. сетей. Последний октет отводится для идентификации узлов, максимальное число которых составляет 254 на каждую сеть. 

_Классы D и E_.

Есть ещё класс D — мультикастовые адреса и класс E — экспериментальные, которые IANA не выдаёт и проводит на них какие-то тёмные эксперименты.

А если серьезно, адреса из этих блоков зарезервированы и не могут назначаться сетям и хостам. 

Класс D предназначен для многоадресной рассылки. Аналогию можно привести с телевидением. Телеканал вещает группе лиц свой эфир. И те, кто подключены, могут смотреть телепередачи. То есть в распоряжение администраторов могут попасть только 3 первых класса.

Первые биты у класса D — это 1110. Пример адреса — 224.0.0.5.  В сетях подобного формата используется широковещательная рассылка сообщений нескольким узлам.

Первые биты у класса E — это 1111. Пример адреса 240.0.0.1. IP-адреса зарезервированы для использования в будущем.



## Основные отличия IPv6 и IPv4. 

IPv6 — новая версия интернет-протокола, призванная решить проблемы, с которыми столкнулась предыдущая версия при её использовании в Интернете, за счёт целого ряда принципиальных изменений. Протокол был разработан IETF. 
Длина адреса IPv6 составляет 128 бит, в отличие от адреса IPv4, длина которого равна 32 битам. 

### Сходство между IPv4 и IPv6.

Основная функция IPv4 и IPv6 заключается в том, чтобы отправляемые через Интернет данные были направлены на нужное устройство независимо от используемой сетевой инфраструктуры. 

1. Назначенная система именования. 

Протоколы IPv4 и IPv6 присваивают уникальное имя (идентификатор) каждому устройству в Интернете. Это не только компьютеры, но и мобильные телефоны и сетевые устройства Интернета вещей.

2. Базовый протокол. 

Как IPv4, так и IPv6 являются частью стека TCP/IP. Этот набор протоколов определяет стандартную операционную структуру Интернета с начала 1980-х годов. В стек TCP/IP также входит UDP (протокол пользовательских дейтаграмм). Несмотря на то, что в названии указана четвертая версия, по сути IPv4 был первым межсетевым протоколом. Сменяющий его IPv6 был определен еще в 1995 году, но не считался интернет-стандартом и не относился к стеку протоколов TCP/IP до 2017 года. 

3. Передача данных без подключения. 

Протоколы IPv4 и IPv6 не используют концепцию «подключения», а применяют многопакетную маршрутизацию для разделения данных на небольшие блоки, которые отправляются через Интернет. IPv4 и IPv6 определяют путь отдельно для каждого из этих пакетов, то есть пакеты одного фрагмента данных могут доставляться получателю через Интернет по разным маршрутам. На принимающем устройстве пакеты снова собираются в правильном порядке. Это выполняется протоколами TCP и UDP на транспортном уровне модели OSI.

### Различия между IPv4 и IPv6.

Пакеты IPv4 и IPv6 имеют разную структуру: IPv6 использует другие заголовки и требует меньше пространства для них. Также IPv6 поддерживает отдельные пакеты заголовков для расширения возможностей маршрутизации. 

1. Адресное пространство. 

Полное адресное пространство IPv4 составляет 2³² (4 294 967 296) IP-адресов. IPv6 имеет значительно большее адресное пространство размером в 2¹²⁸, (3,403×10³ или 340 282 366 920 938 000 000 000 000) уникальных IP-адресов. Это произносится как 340 ундециллионов и примерно 300 дециллионов.

2. Именование. 

В IPv4 имена адресов представляются числовым значением, которое состоит из четырех десятичных чисел (в диапазоне от 0 до 255, что соответствует восьми битам), разделенных тремя точками: 197.0.0.1

В IPv6 имена адресов представляются восемью шестнадцатеричными числами (по четыре символа, каждый из которых соответствует четырем битам и может быть цифрой (0-9) или буквой (a-f)), разделенными двоеточиями: 2600:1400:d:5a3::3bd4

3. Типы коммуникации. 

Для повышения эффективности коммуникации как IPv4, так и IPv6 поддерживают разные типы адресации, что позволяет одному устройству взаимодействовать с несколькими устройствами в сети одновременно. IPv4 поддерживает адресацию «один к одному» (одноадресная рассылка), «один ко всем» (широковещательная передача) и «один ко многим» (многоадресная рассылка) с многопакетной маршрутизацией. IPv6, в свою очередь, поддерживает одноадресную, многоадресную и массовую рассылку с многопакетной маршрутизацией. При передаче в режиме массовой рассылки пакеты данных отправляются от одного отправителя ближайшему из нескольких получателей с тем же адресом массовой рассылки. «Ближайший» путь определяется протоколами маршрутизации, которые вычисляют кратчайший путь или минимальную стоимость доставки к месту назначения.

### Аспекты, по которым IPv6 лучше, чем IPv4.

IPv6 по своей сути работает лучше, чем IPv4, поскольку для нормальной работы IPv4 требуется трансляция сетевых адресов (NAT). Такое преобразование настраивается во многих сетях для искусственного увеличения адресного пространства IPv4. Это позволяет направлять пакеты на нужные устройства, даже когда отдельных IP-адресов для них уже не хватает. Благодаря IPv6 отпадает потребность в NAT, что снижает накладные расходы на преобразование адресов. Ниже перечислены еще несколько преимуществ IPv6.

1. Автоконфигурация.

При использовании IPv4 для назначения IP-адресов и обнаружения подключенных к сети компьютеров требуется отдельный DHCP-сервер. В IPv6 используется технология SLAAC (автоконфигурация адресов без сохранения состояния), которая позволяет устройству самостоятельно настраивать для себя адрес без дополнительных посредников и специальных протоколов. Это избавляет от потребности в DHCP, а также приводит к снижению общего объема трафика в сети.

2. Маршрутизация. 

IPv6 предлагает ряд функций, которые делают маршрутизацию через Интернет более эффективной, чем при работе с IPv4. Например, отказ от преобразования NAT, упрощение заголовков маршрутизации, протокол обнаружения соседей NDP (Neighborhood Discovery Protocol), иерархическая адресация и создание подсетей, а также агрегирование (объединение) маршрутов.

3. Безопасность. 

IPv6 имеет больше встроенных средств безопасности, чем IPv4. Сюда относятся протокол IPsec по умолчанию, возможность добавить расширения конфиденциальности и другие безопасные протоколы маршрутизации, например OSPFv3.

#### Несмотря на все преимущества IPv6 по сравнению с IPv4, большая часть Интернета пока работает на IPv4. Поскольку вся старая инфраструктура поддерживает только IPv4, переход на IPv6 может оказаться дорогостоящим и сложным процессом. Но IPv6 уже становится стандартом в тех отраслях, где современное сетевое оборудование приносит выгоду, например, у интернет-провайдеров, производителей мобильных устройств и устройств Интернета вещей.